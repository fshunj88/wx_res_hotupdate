{"version":3,"sources":["assets/Script/Entry.js"],"names":["cc","Class","extends","Component","properties","openDebug","RichDebug","showDebug","closeDebug","hideDebug","onLoad","window","loadSubpackage","pkgName","callback","sys","platform","WECHAT_GAME","wx","console","log","loadTask","name","success","res","fail","error","onProgressUpdate","progress","totalBytesWritten","totalBytesExpectedToWrite","os","OS_ANDROID","OS_IOS","isBrowser","require","start","update","dt","onDestroy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAAA,GAAAC;MACIC,SAAAF,GAAAG;MAEAC;MAIAC,WAAA,SAAAA;QACIC,UAAAC;;MAGJC,YAAA,SAAAA;QACIF,UAAAG;;MAGJC,QAAA,SAAAA;QACIC,OAAA,iBACIA,OAAA;QAGJ,IAAAC,iBAAA,SAAAA,eAAAC,SAAAC;UACI,IAAAd,GAAAe,IAAAC,YAAAhB,GAAAe,IAAAE,eAAAC,MAAAA,GAAAN,gBAAA;YACIO,QAAAC,IAAA;YACA,IAAAC,WAAAH,GAAAN;cACIU,MAAAT;cACAU,SAAA,SAAAA,QAAAC;gBACIV,YACIA;;cAGRW,MAAA,SAAAA,KAAAD;gBACIL,QAAAO,MAAAF;;;YAGRH,SAAAM,iBAAA,SAAAH;cACIL,QAAAC,IAAA,4BAAAP,SAAAW,IAAAI;cACAT,QAAAC,IAAA,0DAAAP,SAAAW,IAAAK;cACAV,QAAAC,IAAA,4EAAAP,SAAAW,IAAAM;;iBAEP,IAAA9B,GAAAe,IAAAgB,MAAA/B,GAAAe,IAAAiB,cAAAhC,GAAAe,IAAAgB,MAAA/B,GAAAe,IAAAkB,UAAAjC,GAAAe,IAAAC,YAAAhB,GAAAe,IAAAmB,WASGpB,YACIA,iBAVP;YAEGH,OAAAwB,QAAA,iBAAAtB,UAAA;YACAC,YACIA;;;QAWZF,eAAA,aAAA;UACIO,QAAAC,IAAA;UACAT,OAAA,aAAA;;;MAIRyB,OAAA,SAAAA;QACIzB,OAAA,gBAAAA,OAAA,aAAA,YACIA,OAAA,aAAA;;MAIR0B,QAAA,SAAAA,OAAAC;QACI3B,OAAA,gBAAAA,OAAA,aAAA,aACIA,OAAA,aAAA,UAAA2B;;MAIRC,WAAA,SAAAA;QACI5B,OAAA,gBAAAA,OAAA,aAAA,cACIA,OAAA,aAAA","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    openDebug: function () {\r\n        RichDebug.showDebug()\r\n    },\r\n\r\n    closeDebug: function () {\r\n        RichDebug.hideDebug()\r\n    },\r\n\r\n    onLoad() {\r\n        if (!window[\"GameLogic\"]) {\r\n            window[\"GameLogic\"] = {};\r\n        }\r\n        //加载分包\r\n        var loadSubpackage = function (pkgName, callback) {\r\n            if (cc.sys.platform == cc.sys.WECHAT_GAME && wx && wx.loadSubpackage) {\r\n                console.log(\"微信小游戏加载分包并执行GameLogic.js\");\r\n                const loadTask = wx.loadSubpackage({\r\n                    name: pkgName,\r\n                    success: function (res) {\r\n                        if (callback) {\r\n                            callback();\r\n                        }\r\n                    },\r\n                    fail: function (res) {\r\n                        console.error(res);\r\n                    }\r\n                });\r\n                loadTask.onProgressUpdate(res => {\r\n                    console.log('下载进度', pkgName, res.progress)\r\n                    console.log('已经下载的数据长度', pkgName, res.totalBytesWritten)\r\n                    console.log('预期需要下载的数据总长度', pkgName, res.totalBytesExpectedToWrite)\r\n                });\r\n            } else if ((cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.OS_IOS) && cc.sys.platform != cc.sys.isBrowser) {\r\n                //原生平台,进入ts层执行\r\n                window.require('subpackages/' + pkgName + \"/index.js\");\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            }\r\n            else {\r\n                //H5平台不用管，自动执行ts层代码\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            }\r\n        }\r\n\r\n        loadSubpackage(\"GameLogic\", function () {\r\n            console.log(\"载入完成\");\r\n            window[\"GameLogic\"][\"entry\"]();\r\n        });\r\n    },\r\n\r\n    start() {\r\n        if (window[\"GameLogic\"] && window[\"GameLogic\"][\"start\"]) {\r\n            window[\"GameLogic\"][\"start\"]();\r\n        }\r\n    },\r\n\r\n    update(dt) {\r\n        if (window[\"GameLogic\"] && window[\"GameLogic\"][\"update\"]) {\r\n            window[\"GameLogic\"][\"update\"](dt);\r\n        }\r\n    },\r\n\r\n    onDestroy() {\r\n        if (window[\"GameLogic\"] && window[\"GameLogic\"][\"destroy\"]) {\r\n            window[\"GameLogic\"][\"destroy\"]();\r\n        }\r\n    },\r\n\r\n});\r\n"],"file":"project.dev.js"}